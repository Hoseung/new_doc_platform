/**
 * LitePub Sidebar Docs Theme
 *
 * RTD/Furo-inspired documentation theme with:
 * - Fixed sidebar with TOC on the left
 * - Content area on the right
 * - Responsive mobile sidebar
 */

/* ==========================================================================
   CSS Variables
   ========================================================================== */

:root {
  /* Sidebar colors (RTD-like) */
  --sidebar-bg: #1a1c1e;
  --sidebar-text: #fcfcfc;
  --sidebar-text-muted: #9b9b9b;
  --sidebar-link: #fcfcfc;
  --sidebar-link-hover: #ffffff;
  --sidebar-active-bg: rgba(255, 255, 255, 0.1);
  --sidebar-border: #2d2d2d;

  /* Content colors */
  --color-text: #404040;
  --color-text-secondary: #707070;
  --color-background: #ffffff;
  --color-background-secondary: #f8f9fa;
  --color-border: #e5e5e5;
  --color-link: #2980b9;
  --color-link-hover: #3498db;
  --color-code-bg: #f8f8f8;
  --color-code-border: #e1e1e1;
  --color-table-header-bg: #f1f1f1;
  --color-table-stripe: #fafafa;

  /* Typography */
  --font-family-base: "Lato", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans", "Noto Sans CJK KR", sans-serif;
  --font-family-mono: "Roboto Mono", "SFMono-Regular", Consolas, "Noto Sans Mono CJK KR", monospace;
  --font-size-base: 16px;
  --line-height-base: 1.65;

  /* Layout */
  --sidebar-width: 300px;
  --content-max-width: 800px;
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
}

/* ==========================================================================
   Base Reset
   ========================================================================== */

*, *::before, *::after {
  box-sizing: border-box;
}

html {
  font-size: var(--font-size-base);
  line-height: var(--line-height-base);
  scroll-behavior: smooth;
}

body {
  margin: 0;
  padding: 0;
  font-family: var(--font-family-base);
  color: var(--color-text);
  background-color: var(--color-background);
}

/* ==========================================================================
   Mobile Header (#lp-nav)
   ========================================================================== */

#lp-nav.mobile-header {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 50px;
  background: var(--sidebar-bg);
  color: var(--sidebar-text);
  z-index: 1000;
  padding: 0 var(--spacing-md);
  align-items: center;
  gap: var(--spacing-md);
}

.sidebar-toggle {
  background: none;
  border: none;
  padding: var(--spacing-sm);
  cursor: pointer;
}

.hamburger {
  display: block;
  width: 20px;
  height: 2px;
  background: var(--sidebar-text);
  position: relative;
}

.hamburger::before,
.hamburger::after {
  content: '';
  position: absolute;
  width: 100%;
  height: 100%;
  background: var(--sidebar-text);
  left: 0;
}

.hamburger::before { top: -6px; }
.hamburger::after { top: 6px; }

.mobile-title {
  font-weight: 700;
  font-size: 1.1rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ==========================================================================
   Sidebar (#lp-sidebar)
   ========================================================================== */

#lp-sidebar {
  position: fixed;
  top: 0;
  left: 0;
  bottom: 0;
  width: var(--sidebar-width);
  background: var(--sidebar-bg);
  color: var(--sidebar-text);
  overflow-y: auto;
  z-index: 900;
  display: flex;
  flex-direction: column;
}

.sidebar-header {
  padding: var(--spacing-lg);
  border-bottom: 1px solid var(--sidebar-border);
}

.project-title {
  display: block;
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--sidebar-link);
  text-decoration: none;
  margin-bottom: var(--spacing-xs);
}

.project-title:hover {
  color: var(--sidebar-link-hover);
}

.version-badge {
  display: inline-block;
  padding: 0.1rem 0.4rem;
  font-size: 0.75rem;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  color: var(--sidebar-text-muted);
}

/* ==========================================================================
   Sidebar TOC (#lp-toc)
   ========================================================================== */

#lp-toc.sidebar-toc {
  flex: 1;
  padding: var(--spacing-md) 0;
  overflow-y: auto;
}

#lp-toc ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

#lp-toc > ul > li {
  margin-bottom: var(--spacing-sm);
}

#lp-toc a {
  display: block;
  padding: var(--spacing-xs) var(--spacing-lg);
  color: var(--sidebar-text-muted);
  text-decoration: none;
  font-size: 0.9rem;
  transition: background 0.15s, color 0.15s;
}

#lp-toc a:hover {
  color: var(--sidebar-link-hover);
  background: var(--sidebar-active-bg);
}

#lp-toc a.active {
  color: var(--sidebar-link);
  background: var(--sidebar-active-bg);
  border-left: 3px solid var(--color-link);
  padding-left: calc(var(--spacing-lg) - 3px);
}

/* Nested levels */
#lp-toc ul ul {
  padding-left: var(--spacing-md);
}

#lp-toc ul ul a {
  font-size: 0.85rem;
  padding: 0.2rem var(--spacing-lg);
}

/* Collapsible TOC */
#lp-toc .toc-collapsed {
  display: none;
}

#lp-toc .toc-expanded {
  display: block;
}

#lp-toc .toc-has-children > a {
  padding-right: 2rem;
}

#lp-toc .toc-toggle {
  position: absolute;
  right: var(--spacing-sm);
  top: 50%;
  transform: translateY(-50%);
  width: 1.5rem;
  height: 1.5rem;
  background: none;
  border: none;
  cursor: pointer;
  color: var(--sidebar-text-muted);
  font-size: 0.75rem;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform 0.2s, color 0.15s;
  padding: 0;
}

#lp-toc .toc-toggle:hover {
  color: var(--sidebar-link-hover);
}

#lp-toc .toc-toggle.toc-open {
  transform: translateY(-50%) rotate(90deg);
}

#lp-toc .toc-has-children {
  position: relative;
}

/* Sidebar navigation (for site mode) */
.sidebar-nav {
  padding: var(--spacing-md) 0;
  border-top: 1px solid var(--sidebar-border);
}

.sidebar-nav ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

.sidebar-nav a {
  display: block;
  padding: var(--spacing-sm) var(--spacing-lg);
  color: var(--sidebar-text);
  text-decoration: none;
  font-weight: 500;
}

.sidebar-nav a:hover,
.sidebar-nav a.active {
  background: var(--sidebar-active-bg);
}

/* ==========================================================================
   Main Content Area
   ========================================================================== */

.main-wrapper {
  margin-left: var(--sidebar-width);
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* ==========================================================================
   Header (#lp-header)
   ========================================================================== */

#lp-header {
  padding: var(--spacing-xl) var(--spacing-xl);
  max-width: var(--content-max-width);
  margin: 0 auto;
  width: 100%;
}

#lp-header .title {
  margin: 0 0 var(--spacing-sm);
  font-size: 2.2rem;
  font-weight: 700;
  color: var(--color-text);
}

#lp-header .subtitle {
  margin: 0 0 var(--spacing-md);
  font-size: 1.2rem;
  color: var(--color-text-secondary);
}

#lp-header .author,
#lp-header .date {
  margin: var(--spacing-xs) 0;
  color: var(--color-text-secondary);
  font-size: 0.9rem;
}

#lp-header .abstract {
  margin-top: var(--spacing-lg);
  padding: var(--spacing-md);
  background-color: var(--color-background-secondary);
  border-left: 4px solid var(--color-link);
  border-radius: 0 4px 4px 0;
}

#lp-header .abstract-title {
  font-weight: 700;
  margin-bottom: var(--spacing-sm);
}

/* ==========================================================================
   Main Content (#lp-content)
   ========================================================================== */

#lp-content {
  flex: 1;
  padding: 0 var(--spacing-xl) var(--spacing-xl);
  max-width: var(--content-max-width);
  margin: 0 auto;
  width: 100%;
}

/* Headings */
#lp-content h1 { font-size: 2rem; margin-top: var(--spacing-xl); }
#lp-content h2 { font-size: 1.6rem; margin-top: var(--spacing-xl); padding-bottom: var(--spacing-sm); border-bottom: 1px solid var(--color-border); }
#lp-content h3 { font-size: 1.3rem; margin-top: var(--spacing-lg); }
#lp-content h4 { font-size: 1.1rem; margin-top: var(--spacing-lg); }
#lp-content h5, #lp-content h6 { font-size: 1rem; margin-top: var(--spacing-md); }

#lp-content h1, #lp-content h2, #lp-content h3,
#lp-content h4, #lp-content h5, #lp-content h6 {
  font-weight: 700;
  color: var(--color-text);
  margin-bottom: var(--spacing-md);
}

/* Paragraphs & Links */
#lp-content p {
  margin: 0 0 var(--spacing-md);
}

#lp-content a {
  color: var(--color-link);
  text-decoration: none;
}

#lp-content a:hover {
  color: var(--color-link-hover);
  text-decoration: underline;
}

/* Lists */
#lp-content ul, #lp-content ol {
  margin: 0 0 var(--spacing-md);
  padding-left: var(--spacing-xl);
}

#lp-content li {
  margin: var(--spacing-xs) 0;
}

/* ==========================================================================
   Code Blocks
   ========================================================================== */

#lp-content code {
  font-family: var(--font-family-mono);
  font-size: 0.85em;
  padding: 0.15em 0.4em;
  background-color: var(--color-code-bg);
  border: 1px solid var(--color-code-border);
  border-radius: 3px;
}

#lp-content pre {
  margin: 0 0 var(--spacing-md);
  padding: var(--spacing-md);
  background-color: var(--color-code-bg);
  border: 1px solid var(--color-code-border);
  border-radius: 4px;
  overflow-x: auto;
}

#lp-content pre code {
  padding: 0;
  background: none;
  border: none;
  font-size: 0.875rem;
}

/* ==========================================================================
   Tables
   ========================================================================== */

#lp-content table {
  width: 100%;
  margin: 0 0 var(--spacing-md);
  border-collapse: collapse;
}

#lp-content th, #lp-content td {
  padding: var(--spacing-sm) var(--spacing-md);
  border: 1px solid var(--color-border);
  text-align: left;
}

#lp-content th {
  background-color: var(--color-table-header-bg);
  font-weight: 700;
}

#lp-content tr:nth-child(even) {
  background-color: var(--color-table-stripe);
}

/* ==========================================================================
   Semantic Blocks
   ========================================================================== */

.computed-figure,
.computed-table,
.computed-metric {
  margin: var(--spacing-lg) 0;
  padding: var(--spacing-md);
  background-color: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: 4px;
}

.computed-figure figcaption {
  font-weight: 600;
  text-align: center;
  margin-top: var(--spacing-sm);
  color: var(--color-text-secondary);
}

.computed-figure img {
  max-width: 100%;
  height: auto;
  display: block;
  margin: 0 auto;
}

.computed-metric .metric-value {
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--color-link);
}

/* ==========================================================================
   Foldable Sections
   ========================================================================== */

.foldable {
  margin: var(--spacing-md) 0;
  border: 1px solid var(--color-border);
  border-radius: 4px;
}

.foldable-header {
  display: flex;
  align-items: center;
  padding: var(--spacing-sm) var(--spacing-md);
  background-color: var(--color-background-secondary);
  cursor: pointer;
  font-weight: 600;
}

.foldable-header::before {
  content: "\25B6";
  margin-right: var(--spacing-sm);
  font-size: 0.7em;
  transition: transform 0.2s;
}

.foldable.open .foldable-header::before {
  transform: rotate(90deg);
}

.foldable-content {
  display: none;
  padding: var(--spacing-md);
}

.foldable.open .foldable-content {
  display: block;
}

/* ==========================================================================
   Blockquotes
   ========================================================================== */

#lp-content blockquote {
  margin: var(--spacing-md) 0;
  padding: var(--spacing-md);
  border-left: 4px solid var(--color-link);
  background-color: var(--color-background-secondary);
  color: var(--color-text-secondary);
}

/* ==========================================================================
   Footer (#lp-footer)
   ========================================================================== */

#lp-footer {
  padding: var(--spacing-lg) var(--spacing-xl);
  text-align: center;
  border-top: 1px solid var(--color-border);
  color: var(--color-text-secondary);
  font-size: 0.875rem;
}

/* ==========================================================================
   Overlay (Mobile)
   ========================================================================== */

.sidebar-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  z-index: 800;
}

/* ==========================================================================
   Responsive Design
   ========================================================================== */

@media (max-width: 1024px) {
  #lp-nav.mobile-header {
    display: flex;
  }

  #lp-sidebar {
    transform: translateX(-100%);
    transition: transform 0.3s ease;
  }

  body.sidebar-open #lp-sidebar {
    transform: translateX(0);
  }

  body.sidebar-open .sidebar-overlay {
    display: block;
  }

  .main-wrapper {
    margin-left: 0;
    padding-top: 50px;
  }

  #lp-header,
  #lp-content {
    padding-left: var(--spacing-md);
    padding-right: var(--spacing-md);
  }
}

/* ==========================================================================
   Print Styles
   ========================================================================== */

@media print {
  #lp-nav,
  #lp-sidebar,
  #lp-footer {
    display: none !important;
  }

  .main-wrapper {
    margin-left: 0;
  }

  #lp-content {
    max-width: none;
  }
}
