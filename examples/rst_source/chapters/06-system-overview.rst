.. _`sec:system-overview`:

System Overview and Use Cases
=============================

This chapter describes the design philosophy, features, and practical use cases of this documentation system.

.. _`sec:design-philosophy`:

Design Philosophy
-----------------

This documentation system is built around four core principles that address common pain points in technical writing:

**Easy to Edit**
    Content is written in plain text formats (Markdown or reStructuredText) that require no special software. Any text editor works, and the syntax is human-readable even without rendering.

**Easy to Automate**
    Python scripts generate figures and tables programmatically. When underlying data changes, a single command regenerates all derived content. This ensures reproducibility and eliminates manual copy-paste errors.

**Easy to Render**
    A single source produces multiple output formats: PDF for printing, HTML for web viewing, DOCX for collaboration with Word users, and EPUB for e-readers. The Makefile handles all conversion automatically.

**Easy to Process**
    Plain text sources with semantic markup are ideal for processing by language models and other automated tools. The structured organization and metadata-rich tables preserve context for AI-assisted workflows.

.. _`sec:key-features`:

Key Features
------------

Dual Build System
^^^^^^^^^^^^^^^^^

The system supports two documentation toolchains:

1. **Pandoc workflow**: Write in Markdown, convert to PDF/HTML/DOCX using Pandoc with pandoc-crossref for cross-references.

2. **Sphinx workflow**: Write in reStructuredText, build with Sphinx for full-featured HTML documentation with search, PDF via LaTeX, and EPUB.

Both workflows share the same Python scripts for figure and table generation, allowing you to choose the toolchain that best fits your needs.

.. code-block:: bash

   # Pandoc workflow
   make all          # Build PDF and HTML
   make pdf          # Build PDF only

   # Sphinx workflow
   make sphinx-html  # Build HTML documentation
   make sphinx-pdf   # Build PDF via LaTeX

Automated Content Generation
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Figures and tables are generated by Python scripts rather than created manually:

**Figures**: The ``generate_figures.py`` script creates publication-quality plots using matplotlib at 300 DPI. When data or visualization requirements change, regenerating figures is a single command.

**Tables**: The ``TableManager`` class creates tables with YAML frontmatter containing metadata (caption, label, description). The preprocessor automatically replaces placeholders like ``{{table:tbl:03-results}}`` with actual table content during build.

.. code-block:: python

   from scripts.table_manager import TableManager

   tm = TableManager(chapter=3)
   tm.save_table(
       dataframe,
       name="experimental-results",
       caption="Experimental Results Summary",
       description="Results from the primary experiment series."
   )

Self-Contained Tables
^^^^^^^^^^^^^^^^^^^^^

Each generated table is a self-contained file with YAML frontmatter:

.. code-block:: yaml

   ---
   label: tbl:03-experimental-results
   caption: Experimental Results Summary
   chapter: 3
   description: Results from the primary experiment series.
   generated: 2025-01-15T10:30:00
   ---

   | Metric | Value | Unit |
   |--------|-------|------|
   | Accuracy | 95.2 | % |
   | Precision | 94.8 | % |

This metadata travels with the table, providing context even when processed by external tools or language models.

Korean/CJK Support
^^^^^^^^^^^^^^^^^^

Full support for Korean, Japanese, and Chinese text:

- Pre-configured Noto CJK fonts for PDF output
- Korean matplotlib utilities for properly rendered plot labels
- Mixed-language documents work seamlessly
- UTF-8 throughout the entire pipeline

.. code-block:: python

   from scripts.utils.korean_plot import setup_korean_font

   setup_korean_font()
   plt.xlabel('측정값 (Measurements)')
   plt.title('실험 결과 분석')

Adaptive Toolchain
^^^^^^^^^^^^^^^^^^

The Makefile automatically detects your Pandoc version and adjusts accordingly:

- Uses ``--citeproc`` for Pandoc 2.11+ or ``--filter pandoc-citeproc`` for older versions
- Gracefully degrades when optional filters (pandoc-crossref) are unavailable
- Provides warnings but continues building when possible

This ensures the system works across different environments without manual configuration.

.. _`sec:use-cases`:

Use Cases
---------

Technical Reports and White Papers
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The primary use case: writing technical documents where figures and tables derive from data analysis.

**Workflow**:

1. Perform analysis in Python, generating figures and tables
2. Write narrative content in Markdown/RST
3. Reference figures and tables using cross-reference syntax
4. Build the complete document with ``make pdf``

When the analysis updates, regenerate content and rebuild. The document stays synchronized with your data.

Reproducible Research
^^^^^^^^^^^^^^^^^^^^^

For academic papers or research reports where reproducibility matters:

- All figures regenerable from source data via Python scripts
- Git tracks both content and generation scripts
- Anyone can clone the repository and rebuild the exact same document
- Changes to methodology are reflected automatically in output

LLM-Assisted Documentation
^^^^^^^^^^^^^^^^^^^^^^^^^^

The plain text format and structured organization make this system ideal for AI-assisted workflows:

**Content generation**: Language models can read the source files, understand the document structure, and generate new sections that follow existing patterns.

**Data analysis**: LLMs can write Python scripts that generate figures and tables, which integrate seamlessly into the document.

**Review and editing**: The semantic markup (cross-references, labeled sections) provides context that helps LLMs understand relationships between document parts.

**Automation**: LLM agents can trigger build commands, check for errors, and iterate on content.

Example LLM workflow:

1. Provide the LLM with source files for context
2. Request new analysis or content
3. LLM generates Python scripts and/or document sections
4. Build and review the output
5. Iterate as needed

Multi-Format Publishing
^^^^^^^^^^^^^^^^^^^^^^^

When the same content must reach different audiences:

- **PDF**: For formal distribution, printing, archival
- **HTML**: For web publishing with navigation and search
- **DOCX**: For collaboration with reviewers who use Word
- **EPUB**: For reading on mobile devices

Write once, publish everywhere. The Makefile handles all conversions.

Collaborative Writing
^^^^^^^^^^^^^^^^^^^^^

Git-friendly plain text enables effective collaboration:

- Multiple authors work on different chapters simultaneously
- Pull requests for review before merging changes
- Clear diff views show exactly what changed
- No binary file conflicts

.. _`sec:getting-started`:

Getting Started
---------------

Quick setup for new users:

.. code-block:: bash

   # Clone or create project
   cd your-project

   # Set up Python environment
   uv venv
   uv sync --all-extras

   # Generate content and build
   make all

The document builds to ``whitepaper.pdf`` and ``whitepaper.html``.

For Sphinx output:

.. code-block:: bash

   make sphinx-html

Output appears in ``output/html/index.html``.

.. _`sec:system-summary`:

Summary
-------

This documentation system addresses the core challenges of technical writing:

.. list-table:: System Capabilities
   :header-rows: 1
   :widths: 30 70

   * - Capability
     - Description
   * - Easy editing
     - Plain text Markdown/RST with any editor
   * - Reproducibility
     - Python scripts regenerate all derived content
   * - Multi-format output
     - PDF, HTML, DOCX, EPUB from single source
   * - LLM compatibility
     - Structured plain text ideal for AI processing
   * - Automation
     - Single command builds via Makefile
   * - Collaboration
     - Git-friendly with clear diffs
   * - Internationalization
     - Full Korean/CJK support

The result is a modern documentation workflow that scales from simple reports to complex technical publications, supports both human and AI authors, and produces professional output in any required format.
